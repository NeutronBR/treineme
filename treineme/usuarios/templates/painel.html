{% extends "base.html" %}
{% load cursos_tags %}


{% comment "templatetags" %}
    O load de templatetags foi feito na tag abaixo e inserido com {% meus_cursos user %}. Essa foi uma tag criada para a exibição dos cursos inscritos de qualquer view que extendesse a template painel.html, sem precisar alterar o código de todas as views que a chamassem (adicionando ao contexto as inscricoes do usuario).
{% endcomment %}


{% block meubody %}
<div class="container">
    <div class="row">
        <ol class="breadcrumb">
            {% block breadcrumb %}
            <li class="breadcrumb-item">
                <i class="fa fa-sitemap fa-fw" aria-hidden="true"></i><a href="{% url 'usuarios:painel' %}"> Meu Painel</a>
            </li>
            {% endblock breadcrumb %}
        </ol>
    </div>
    <div class="row">
        <div class="col-md-3 container">
            <nav class="painel-usuario mb-3">
                {% block menu_painel %}
                <h6 class="mx-3 py-1"><i class="fa fa-book fa-fw"></i> Meus Cursos</h6>
                <ul class="nav flex-column nav-pills mb-2">
                    {% meus_cursos user %}
                </ul>
                <h6 class="mx-3 py-1"><i class="fa fa-user-circle-o fa-fw"></i> Minha conta</h6>
                <ul class="nav flex-column nav-pills">
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'usuarios:editar' %}"><i class="fa fa-cog fa-fw"></i>Configurações</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'usuarios:editar_senha' %}"><i class="fa fa-lock fa-fw"></i> Alterar senha</a>
                    </li>
                </ul>
                {% endblock menu_painel %}
                {% block tags %}
                <h6 class="mx-3 py-1"><i class="fa fa-tags" aria-hidden="true"></i> Tags</h6>
                <ul class="nav flex-column nav-pills mb-2">
                </ul>
                {% endblock %}
            </nav>
        </div>

        <div class="col-md-9">
            {% block conteudo %}
            <div class="container">
                <div class="row">
                    {% load_meus_cursos user as inscricoes %}
                    <div class="list-group">
                        <h3>Meus Cursos</h3>
                        {% for inscricao in inscricoes %}
                        <a class="list-group-item list-group-item-action" href="{% url 'cursos:anuncios' inscricao.curso.atalho %}">
                            <h4>{{ inscricao.curso }}</h4>
                            <div class="mb-3">
                                <small>Última atualização em: {{ inscricao.curso.data_atualizacao|date:'d/m/Y'|default:'Sem data' }}</small>
                            </div>
                            <p>{{ inscricao.curso.descricao|linebreaks }}</p>
                            <i class="fa fa-tags" aria-hidden="true"></i> Tags:
                            {% for tag in inscricao.curso.tags.all %}
                            {{ tag }}{% if not forloop.last %}, {% endif %}
                            {% endfor %}
                        </a>
                        {% empty %}
                        <div class="alert alert-info" role="alert">
                            Você ainda não se inscreveu em um curso
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
            {% endblock conteudo %}
        </div>
    </div>
</div>
{% endblock meubody %}
